# $Id$
#
# Ce fichier sert à faciliter et automatiser la mise en prod de la prochaine
# release. On y indique les requètes à appliquer à la base de donée (pour la
# mettre à jour), et éventuellement d'autres informations utiles.
# Il faut donc veiller à le tenir à jour à chaque modification de la base de
# données.
#
# ATTENTION A L'ORDRE DES REQUETES:
# ---------------------------------
# Elles doivent être de la plus ancienne à la plus récente dans le bloc de la
# release en cours.
#
# FONCTIONNEMENT
# --------------
# Pendant la phase de développement suivant une release, on écrit les requètes
# nécessaires à la mise à jour des bases de données (depuis la release jusqu'à
# la release suivante).
#
# Lors de la mise en production de la release suivante (release + 1), on
# applique ce fichier aux bases de données pour les mettre à jour, puis on
# renomme le fichier en RELEASE_NOTES.OLD, et on entame un nouveau
# RELEASE_NOTES (en prévision de release + 2).
#
# TODO IMPORTANT !!
# -----------------
# à chaque RELEASE, ne pas oublier de:
#    * Mettre à jour les feeds ipkg du zaurus,
#    * Updater les applications desktop

####################################
# Ne pas enlever
SET AUTOCOMMIT=0;
BEGIN;
TRUNCATE TABLE IdHashTable;
####################################

ALTER TABLE SupplierCustomer ADD _Factor INT(11) NOT NULL DEFAULT 0;

ALTER TABLE RTWModel ADD _Material3 INT(11) NOT NULL DEFAULT 0 AFTER _Material2Quantity;
ALTER TABLE RTWModel ADD _Material3Quantity DECIMAL(10,3) DEFAULT NULL AFTER _Material3;
ALTER TABLE RTWModel ADD _Accessory3 INT(11) NOT NULL DEFAULT 0 AFTER _Accessory2Quantity;
ALTER TABLE RTWModel ADD _Accessory3Quantity DECIMAL(10,3) DEFAULT NULL AFTER _Accessory3;
CREATE INDEX _Material3 ON RTWModel (_Material3);
CREATE INDEX _Accessory3 ON RTWModel (_Accessory3);

ALTER TABLE RTWModel ADD _HeelReferenceNomenclature INT(1) DEFAULT 1 AFTER _HeelReferenceQuantity;
ALTER TABLE RTWModel ADD _SoleNomenclature INT(1) DEFAULT 1 AFTER _SoleQuantity;
ALTER TABLE RTWModel ADD _BoxNomenclature INT(1) DEFAULT 1 AFTER _BoxQuantity;
ALTER TABLE RTWModel ADD _HandBagNomenclature INT(1) DEFAULT 1 AFTER _HandBagQuantity;
ALTER TABLE RTWModel ADD _Material1Nomenclature INT(1) DEFAULT 1 AFTER _Material1Quantity;
ALTER TABLE RTWModel ADD _Material2Nomenclature INT(1) DEFAULT 1 AFTER _Material2Quantity;
ALTER TABLE RTWModel ADD _Material3Nomenclature INT(1) DEFAULT 1 AFTER _Material3Quantity;
ALTER TABLE RTWModel ADD _Accessory1Nomenclature INT(1) DEFAULT 1 AFTER _Accessory1Quantity;
ALTER TABLE RTWModel ADD _Accessory2Nomenclature INT(1) DEFAULT 1 AFTER _Accessory2Quantity;
ALTER TABLE RTWModel ADD _Accessory3Nomenclature INT(1) DEFAULT 1 AFTER _Accessory3Quantity;
ALTER TABLE RTWModel ADD _LiningNomenclature INT(1) DEFAULT 1 AFTER _LiningQuantity;
ALTER TABLE RTWModel ADD _InsoleNomenclature INT(1) DEFAULT 1 AFTER _InsoleQuantity;
ALTER TABLE RTWModel ADD _UnderSoleNomenclature INT(1) DEFAULT 1 AFTER _UnderSoleQuantity;
ALTER TABLE RTWModel ADD _MediaPlantaNomenclature INT(1) DEFAULT 1 AFTER _MediaPlantaQuantity;
ALTER TABLE RTWModel ADD _LagrimaNomenclature INT(1) DEFAULT 1 AFTER _LagrimaQuantity;
ALTER TABLE RTWModel ADD _HeelCoveringNomenclature INT(1) DEFAULT 1 AFTER _HeelCoveringQuantity;
ALTER TABLE RTWModel ADD _SelvedgeNomenclature INT(1) DEFAULT 1 AFTER _SelvedgeQuantity;
ALTER TABLE RTWModel ADD _BambooNomenclature INT(1) DEFAULT 1 AFTER _BambooQuantity;

####################################
# Ne pas enlever
COMMIT;
####################################
